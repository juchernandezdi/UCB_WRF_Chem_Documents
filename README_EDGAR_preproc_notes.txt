

I have used an R script to create the netcdf CO2 emissions files that are used as input in the  
final WRF-Chem model runs. The overall process is as follows:

The PREP-CHEM-SRC preprocessor (separate from WRF) is used to generate CO2 trace gas emission
fields (one file for each hour of the simulation) for the domains of interest. This 
preprocessor provides CO2 emission fields interpolated onto the transport model grid with the 
use of Emission  Database for Global Atmospheric Research (EDGAR, http://edgar.jrc.ec.europa.eu) 
anthropogenic CO2 emission data. More details about the PREP-CHEM_SRC 
preprocessor tool can be found by looking through the paper at the following link:
http://www.geosci-model-dev.net/4/419/2011/gmd-4-419-2011.pdf  

I also used the WRF/Chem-VPRM model for additional preprocessing. This is a coupled model system that
combines WRF/Chem with a diagnositc biosphere model, the Vegetation Photosynthesis & Respiration Model,
(VPRM; http://www.geosci-model-dev.net/4/419/2011/gmd-4-419-2011.pdf;  
ftp://ftp.bgc.mpg.de/pub/outgoing/rkretsch/README.TXT. See also 
http://www.bgc-jena.mpg.de/mpg/websiteBiogeochemie/Publikationen/Technical_Reports/tech_report25.pdf). 
When the real.exe program is run to create wrfinput* and wrfbdy* files, the WRF-VPRM program 
automatically generates arrays for CO2 tracers, VPRM parameters, and anthropogenic fluxes. All 
the arrays contain only zeros. These arrays are filled with relevant (e.g., CO2 emission) data later 
when the final WRF-Chem model is run. Then WRF/Chem program itself is used for additional 
preprocessing  and the generation of  intermediate files (with chemistry turned off). In the next 
step, the files generated by the PREP-CHEM-SRC and WRF-VPRM preprocessers, along with the intermediate 
files generated from WRF/Chem are  used as input files for an R script. The R script uses this input 
data to create a netcdf file containing the arrays for CO2  anthropogenic emissions PRIOR to and for 
use in the WRF-Chem model runs.  The R script is run separately for  each day of the simulation. 
I then combined the resulting CO2 emission netcdf files  (for each day) together into one netcdf file 
using the "ncrcat" tool. This single combined netcdf CO2 emission file is then used as input for the 
final  WRF-Chem simulation model run. 

